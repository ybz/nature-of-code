<!DOCTYPE html>
<meta http-equiv="Content=Type" content="text/html; charset=utf-8">
<html>
    <head>
        <title>Nature Of Code</title>
        <link rel="stylesheet" href="page.css">
        <script type="text/javascript" src="../libs/processing-1.4.1.js"></script>
        <script type="text/javascript" src="../libs/my_lib.js"></script>
    </head>

    <body>
        <canvas id="main_canvas" width="400" height="400"></canvas>
        <script type="text/javascript">
            var canvas = document.getElementById('main_canvas');
            var processingInstance = new Processing(canvas);
            window.p = processingInstance;
            p.size(600,600);

            var text_size = 16;
            var base_x = p.width / 2;
            var base_y = p.height / 2;

            getAngle = function() {
                return p.map(p.mouseX, 0, p.width, 0, p.PI * 2);
            };

            PVRotate = function(pvector, ang) {
                var new_ang = pvector.heading2D() + ang;
                var m = pvector.mag();
                pvector.x = p.cos(ang) * m;
                pvector.y = p.sin(ang) * m;
            };

            p.draw = function() {
                p.background(230, 230, 225);
                p.fill(0);
                p.stroke(0);
                var ang = getAngle();
                var pv = new p.PVector(50, 0);
                p.textSize(text_size);
                p.text("Angle: " + ang.toPrecision(4), text_size, text_size * 1 + 0.5);
                PVRotate(pv, ang);
                p.line(base_x, base_y, base_x + pv.x, base_y + pv.y);
                p.text("Heading: " + pv.heading2D().toPrecision(4), text_size, text_size * 2 + 0.5);
            };

            p.loop();

        </script>
    </body>
</html>
