<!DOCTYPE html>
<meta http-equiv="Content=Type" content="text/html; charset=utf-8">
<html>
    <head>
        <title>Nature Of Code</title>
        <link rel="stylesheet" href="page.css">
        <script type="text/javascript" src="../libs/processing-1.4.1.js"></script>
        <script type="text/javascript" src="../libs/my_lib.js"></script>
    </head>

    <body>
        <canvas id="main_canvas" width="400" height="400"></canvas>
        <script type="text/javascript">
            var canvas = document.getElementById('main_canvas');
            var processingInstance = new Processing(canvas);
            window.p = processingInstance;
            p.size(600,600);
            p.background(230, 230, 225);

            var theta = 0;
            var ang_step = 0.10;
            var center_loc = new p.PVector(p.width/2, p.height/2);
            var distance_from_center = 20;
            var distance_step = 0.1;

            var obj = {
                size : 2,
                calcPos : function() {
                    return ybz.polarToCartesian(distance_from_center, theta, center_loc);
                },
                display : function() {
                    pos = this.calcPos();
                    p.ellipse(pos.x, pos.y, this.size, this.size);
                }
            };

            p.noStroke();

            p.draw = function() {
                p.fill(80, 120, 200);
                obj.display();
                theta += ang_step;
                distance_from_center += distance_step;
                obj.size *= 1.0007;
                if (distance_from_center > p.width/2 - 30) {
                    p.noLoop();
                }
            };
            
            p.loop();

        </script>
    </body>
</html>
